{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import Card from\"./card\";import Preloader from'./preloader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchedFile=_useState4[0],setSearchedFile=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];// Function to handle the API request and update the data state\nvar handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// Prevent the default form submission\nsetTimeout(function(){setLoading(false);},2000);_context.prev=2;_context.next=5;return fetch('/api/search',{method:'POST',body:JSON.stringify({searchedFile:searchedFile}),headers:{'Content-Type':'application/json'}});case 5:response=_context.sent;if(response.ok){_context.next=9;break;}console.log('Error');return _context.abrupt(\"return\");case 9:_context.next=11;return response.json();case 11:json=_context.sent;console.log(json);setData(json);// Update the data state with the fetched results\n_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);console.error('Error:',_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,16]]);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"search-div\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"searchForm\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",name:\"searchedFile\",placeholder:\"Search books here\",onChange:function onChange(e){return setSearchedFile(e.target.value);},value:searchedFile,className:\"searchInput\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"searchButton\",type:\"submit\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Search\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Search Results\"}),loading?/*#__PURE__*/_jsx(Preloader,{}):/*#__PURE__*/_jsx(\"div\",{className:\"search-viewer-div\",children:data.map(function(item){return/*#__PURE__*/_jsx(Card,{list:item,error:item.error},item._id);})||/*#__PURE__*/_jsx(\"p\",{children:\"No search results\"})})]})]})});};export default Search;","map":{"version":3,"names":["useState","Card","Preloader","Search","data","setData","searchedFile","setSearchedFile","loading","setLoading","handleSearch","e","preventDefault","setTimeout","fetch","method","body","JSON","stringify","headers","response","ok","console","log","json","error","target","value","map","item","_id"],"sources":["C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/src/components/Search.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport Card from \"./card\";\r\nimport Preloader from './preloader'\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState([]);\r\n  const [searchedFile, setSearchedFile] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Function to handle the API request and update the data state\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault(); // Prevent the default form submission\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n    }, 2000);\r\n    try {\r\n      const response = await fetch('/api/search', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ searchedFile: searchedFile }),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        console.log('Error');\r\n        return;\r\n      }\r\n\r\n      const json = await response.json();\r\n      console.log(json);\r\n      setData(json); // Update the data state with the fetched results\r\n\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-div\">\r\n\r\n      <div>\r\n        <form className=\"searchForm\" onSubmit={handleSearch}>\r\n          <input\r\n            type=\"search\"\r\n            name=\"searchedFile\"\r\n            placeholder=\"Search books here\"\r\n            onChange={(e) => setSearchedFile(e.target.value)}\r\n            value={searchedFile}\r\n            className=\"searchInput\"\r\n            required\r\n          />\r\n\r\n          <button className=\"searchButton\" type=\"submit\">\r\n            <b>Search</b>\r\n          </button>\r\n        </form>\r\n        <div>\r\n          <h1>Search Results</h1>\r\n          {loading ? (\r\n            <Preloader />\r\n            ) : (\r\n              <div className=\"search-viewer-div\">\r\n                {data.map((item) => (\r\n                  <Card key={item._id} list={item} error={item.error} />\r\n                  )) || <p>No search results</p>\r\n                }\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;"],"mappings":"giBAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,MAAOC,UAAP,KAAsB,aAAtB,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eACA,eAAwCL,QAAQ,CAAC,EAAD,CAAhD,yCAAOM,YAAP,eAAqBC,eAArB,eACA,eAA8BP,QAAQ,CAAC,IAAD,CAAtC,yCAAOQ,OAAP,eAAgBC,UAAhB,eAEA;AACA,GAAMC,aAAY,4FAAG,iBAAOC,CAAP,sIACnBA,CAAC,CAACC,cAAF,GAAoB;AACpBC,UAAU,CAAC,UAAM,CACfJ,UAAU,CAAC,KAAD,CAAV,CACD,CAFS,CAEP,IAFO,CAAV,CAFmB,sCAMMK,MAAK,CAAC,aAAD,CAAgB,CAC1CC,MAAM,CAAE,MADkC,CAE1CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEZ,YAAY,CAAEA,YAAhB,CAAf,CAFoC,CAG1Ca,OAAO,CAAE,CACP,eAAgB,kBADT,CAHiC,CAAhB,CANX,QAMXC,QANW,kBAcZA,QAAQ,CAACC,EAdG,yBAefC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAfe,+DAmBEH,SAAQ,CAACI,IAAT,EAnBF,SAmBXA,IAnBW,eAoBjBF,OAAO,CAACC,GAAR,CAAYC,IAAZ,EACAnB,OAAO,CAACmB,IAAD,CAAP,CAAe;AArBE,iFAwBjBF,OAAO,CAACG,KAAR,CAAc,QAAd,cAxBiB,qEAAH,kBAAZf,aAAY,4CAAlB,CA4BA,mBACE,YAAK,SAAS,CAAC,YAAf,uBAEE,oCACE,cAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAEA,YAAvC,wBACE,cACE,IAAI,CAAC,QADP,CAEE,IAAI,CAAC,cAFP,CAGE,WAAW,CAAC,mBAHd,CAIE,QAAQ,CAAE,kBAACC,CAAD,QAAOJ,gBAAe,CAACI,CAAC,CAACe,MAAF,CAASC,KAAV,CAAtB,EAJZ,CAKE,KAAK,CAAErB,YALT,CAME,SAAS,CAAC,aANZ,CAOE,QAAQ,KAPV,EADF,cAWE,eAAQ,SAAS,CAAC,cAAlB,CAAiC,IAAI,CAAC,QAAtC,uBACE,6BADF,EAXF,GADF,cAgBE,oCACE,sCADF,CAEGE,OAAO,cACN,KAAC,SAAD,IADM,cAGJ,YAAK,SAAS,CAAC,mBAAf,UACGJ,IAAI,CAACwB,GAAL,CAAS,SAACC,IAAD,qBACR,KAAC,IAAD,EAAqB,IAAI,CAAEA,IAA3B,CAAiC,KAAK,CAAEA,IAAI,CAACJ,KAA7C,EAAWI,IAAI,CAACC,GAAhB,CADQ,EAAT,gBAEO,wCAHV,EALN,GAhBF,GAFF,EADF,CAmCD,CArED,CAuEA,cAAe3B,OAAf"},"metadata":{},"sourceType":"module"}