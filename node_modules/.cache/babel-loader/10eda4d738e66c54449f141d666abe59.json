{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(props){var listDetails=props.list;var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,blob,url,a;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Function clicked\");_context.prev=1;_context.next=4;return fetch('/api/download',{method:'POST',body:JSON.stringify({_id:listDetails._id}),headers:{'Content-Type':'application/json'},responseType:'blob'// Set the response type to 'blob' to handle binary data\n});case 4:response=_context.sent;if(response.ok){_context.next=8;break;}console.log('Error');return _context.abrupt(\"return\");case 8:_context.next=10;return response.blob();case 10:blob=_context.sent;// Create a temporary URL for the blob\nurl=URL.createObjectURL(blob);// Create an anchor element and trigger the download\na=document.createElement('a');a.href=url;a.download=listDetails.fileName;// Provide the desired file name\na.click();// Clean up the temporary URL\nURL.revokeObjectURL(url);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);console.error('Error:',_context.t0);case 22:case\"end\":return _context.stop();}}},_callee,null,[[1,19]]);}));return function handleClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"card-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dowload-div\",children:/*#__PURE__*/_jsx(\"button\",{className:\"download-button\",onClick:handleClick,children:\"Download\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"book-destription-div\",children:listDetails.bookDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-detail-div\",children:[/*#__PURE__*/_jsxs(\"text\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name of book\"}),\" : \",/*#__PURE__*/_jsx(\"small\",{children:listDetails.bookName})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"text\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Category\"}),\" : \",/*#__PURE__*/_jsx(\"small\",{children:listDetails.bookCategory})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"text\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Author\"}),\" : \",/*#__PURE__*/_jsx(\"small\",{children:listDetails.UploaderName})]}),/*#__PURE__*/_jsx(\"br\",{})]})]})]});};export default Card;","map":{"version":3,"names":["Card","props","listDetails","list","handleClick","console","log","fetch","method","body","JSON","stringify","_id","headers","responseType","response","ok","blob","url","URL","createObjectURL","a","document","createElement","href","download","fileName","click","revokeObjectURL","error","bookDescription","bookName","bookCategory","UploaderName"],"sources":["C:/Users/MAHIR/Desktop/Web projects/PROJECTS/Fullstack projects/UxerDL Alx/UxerDL/frontend/src/components/card.js"],"sourcesContent":["const Card = (props) => {\r\n\r\n  const listDetails = props.list\r\n\r\n  const handleClick = async () => { \r\n    \r\n      console.log(\"Function clicked\");\r\n      try {\r\n          const response = await fetch('/api/download', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ _id: listDetails._id }),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            responseType: 'blob', // Set the response type to 'blob' to handle binary data\r\n          });\r\n      \r\n          if (!response.ok) {\r\n            console.log('Error');\r\n            return;\r\n          }\r\n      \r\n          const blob = await response.blob();\r\n      \r\n          // Create a temporary URL for the blob\r\n          const url = URL.createObjectURL(blob);\r\n      \r\n          // Create an anchor element and trigger the download\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = listDetails.fileName; // Provide the desired file name\r\n          a.click();\r\n      \r\n          // Clean up the temporary URL\r\n          URL.revokeObjectURL(url);\r\n        } catch (error) {\r\n          console.error('Error:', error);\r\n        }\r\n    \r\n  }\r\n\r\n  return (\r\n      <div className=\"card-div\">\r\n          <div className=\"dowload-div\">\r\n              <button className=\"download-button\" onClick={handleClick}>Download</button>\r\n          </div>\r\n          <div className=\"card-content\"> \r\n              <div className=\"book-destription-div\">{listDetails.bookDescription}</div>\r\n              <div className=\"book-detail-div\">\r\n                  <text><b>Name of book</b> : <small>{listDetails.bookName}</small></text><br />\r\n                  <text><b>Category</b> : <small>{listDetails.bookCategory}</small></text><br />\r\n                  <text><b>Author</b> : <small>{listDetails.UploaderName}</small></text><br />\r\n              </div>\r\n          </div>\r\n      </div>\r\n  )\r\n}\r\nexport default Card;\r\n"],"mappings":"wcAAA,GAAMA,KAAI,CAAG,QAAPA,KAAO,CAACC,KAAD,CAAW,CAEtB,GAAMC,YAAW,CAAGD,KAAK,CAACE,IAA1B,CAEA,GAAMC,YAAW,4FAAG,6JAEhBC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAFgB,sCAIWC,MAAK,CAAC,eAAD,CAAkB,CAC5CC,MAAM,CAAE,MADoC,CAE5CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEC,GAAG,CAAEV,WAAW,CAACU,GAAnB,CAAf,CAFsC,CAG5CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAHmC,CAM5CC,YAAY,CAAE,MAAQ;AANsB,CAAlB,CAJhB,QAINC,QAJM,kBAaPA,QAAQ,CAACC,EAbF,yBAcVX,OAAO,CAACC,GAAR,CAAY,OAAZ,EAdU,+DAkBOS,SAAQ,CAACE,IAAT,EAlBP,SAkBNA,IAlBM,eAoBZ;AACMC,GArBM,CAqBAC,GAAG,CAACC,eAAJ,CAAoBH,IAApB,CArBA,CAuBZ;AACMI,CAxBM,CAwBFC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAxBE,CAyBZF,CAAC,CAACG,IAAF,CAASN,GAAT,CACAG,CAAC,CAACI,QAAF,CAAavB,WAAW,CAACwB,QAAzB,CAAmC;AACnCL,CAAC,CAACM,KAAF,GAEA;AACAR,GAAG,CAACS,eAAJ,CAAoBV,GAApB,EA9BY,iFAgCZb,OAAO,CAACwB,KAAR,CAAc,QAAd,cAhCY,qEAAH,kBAAXzB,YAAW,0CAAjB,CAqCA,mBACI,aAAK,SAAS,CAAC,UAAf,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,eAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAEA,WAA7C,sBADJ,EADJ,cAII,aAAK,SAAS,CAAC,cAAf,wBACI,YAAK,SAAS,CAAC,sBAAf,UAAuCF,WAAW,CAAC4B,eAAnD,EADJ,cAEI,aAAK,SAAS,CAAC,iBAAf,wBACI,qCAAM,mCAAN,oBAA4B,uBAAQ5B,WAAW,CAAC6B,QAApB,EAA5B,GADJ,cAC4E,aAD5E,cAEI,qCAAM,+BAAN,oBAAwB,uBAAQ7B,WAAW,CAAC8B,YAApB,EAAxB,GAFJ,cAE4E,aAF5E,cAGI,qCAAM,6BAAN,oBAAsB,uBAAQ9B,WAAW,CAAC+B,YAApB,EAAtB,GAHJ,cAG0E,aAH1E,GAFJ,GAJJ,GADJ,CAeD,CAxDD,CAyDA,cAAejC,KAAf"},"metadata":{},"sourceType":"module"}